"use strict";(self.webpackChunkminiSchoolERP=self.webpackChunkminiSchoolERP||[]).push([[62],{6062:(R,c,a)=>{a.r(c),a.d(c,{AuthModule:()=>N});var u=a(6019),d=a(1659),r=a(9133),p=a(6263),m=a(7253),e=a(3668),f=a(7384),b=a(8260),h=a(4522),_=a(1244);let v=(()=>{class o{constructor(t,n){this.http=t,this.storage=n,this.url=b.N.apiEndPoint}login(t){return this.http.post(`${this.url}/auth/signin`,Object.assign({},t)).pipe((0,f.b)(n=>{(null==n?void 0:n.accessToken)&&this.storage.setData({session:Object.assign({},n)})}))}register(t){return this.http.post(`${this.url}/auth/signup`,Object.assign({},t)).pipe((0,f.b)(n=>console.log(n)))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(h.eN),e.LFG(_.n))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var w=a(1796);let C=(()=>{class o{constructor(t,n){this.storage=t,this.toaster=n,this.small_screen_position="top-center",this.large_screen_position="top-right",this.defaultStyle={style:{"box-shadow":"0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)",padding:"16px"}}}successNotification(t=""){this.toaster.success(t,Object.assign({position:this.large_screen_position},this.defaultStyle))}warningNotification(t=""){this.toaster.warning(t,Object.assign({position:this.large_screen_position},this.defaultStyle))}errorNotification(t=""){let n=Object.assign(Object.assign({},this.defaultStyle.style),{color:"#dc3545"});this.toaster.error(t,{position:this.large_screen_position,style:n,dismissible:!0})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(_.n),e.LFG(w.jE))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function O(o,i){1&o&&(e.TgZ(0,"div",12),e.TgZ(1,"small",13),e._uU(2,"Username Required"),e.qZA(),e.qZA())}function P(o,i){1&o&&(e.TgZ(0,"div",12),e.TgZ(1,"small",13),e._uU(2,"Password Required"),e.qZA(),e.qZA())}function Z(o,i){return t=>{const s=t.controls[i];s.errors&&!s.errors.confirmedValidator||s.setErrors(t.controls[o].value!==s.value?{confirmedValidator:!0}:null)}}function y(o,i){1&o&&(e.TgZ(0,"div",21),e.TgZ(1,"small",22),e._uU(2,"Username Required"),e.qZA(),e.qZA())}function k(o,i){1&o&&(e.TgZ(0,"small",22),e._uU(1,"Email Required"),e.qZA())}function T(o,i){1&o&&(e.TgZ(0,"small",22),e._uU(1,"Please type valid email address"),e.qZA())}function U(o,i){if(1&o&&(e.TgZ(0,"div",21),e.YNc(1,k,2,0,"small",23),e.YNc(2,T,2,0,"small",23),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.emailf||null==t.emailf.errors?null:t.emailf.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.emailf||null==t.emailf.errors?null:t.emailf.errors.email)}}function A(o,i){1&o&&(e.TgZ(0,"div",21),e.TgZ(1,"small",22),e._uU(2,"Password Required"),e.qZA(),e.qZA())}function q(o,i){1&o&&(e.TgZ(0,"small",22),e._uU(1,"Retype same password"),e.qZA())}function F(o,i){1&o&&(e.TgZ(0,"small",22),e._uU(1,"Password mismatches"),e.qZA())}function S(o,i){if(1&o&&(e.TgZ(0,"div",21),e.YNc(1,q,2,0,"small",23),e.YNc(2,F,2,0,"small",23),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.confirm_passwordf||null==t.confirm_passwordf.errors?null:t.confirm_passwordf.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.confirm_passwordf||null==t.confirm_passwordf.errors?null:t.confirm_passwordf.errors.confirmedValidator)}}const x=[{path:"login",component:(()=>{class o{constructor(t,n,s,g,l){this.fb=t,this.api=n,this.destroy$=s,this.router=g,this.notifier=l,this.loginForm=this.fb.group({username:["",[r.kI.required]],password:["",[r.kI.required]]})}get usernamef(){return this.loginForm.get("username")}get passwordf(){return this.loginForm.get("password")}ngOnInit(){}signin(){this.loginForm.valid&&this.api.login(this.loginForm.value).pipe((0,p.R)(this.destroy$)).subscribe(t=>{(null==t?void 0:t.accessToken)&&(this.notifier.successNotification("Successfully logged in"),this.router.navigateByUrl("pages/dashboard"))})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(r.qu),e.Y36(v),e.Y36(m.$),e.Y36(d.F0),e.Y36(C))},o.\u0275cmp=e.Xpm({type:o,selectors:[["auth-login"]],features:[e._Bn([m.$])],decls:19,vars:8,consts:[[1,"box",3,"formGroup"],["alt","logo","src","assets/images/login.svg",1,"logo"],[1,"signin"],[1,"my-3"],["name","username","type","text","placeholder","Username or Email","formControlName","username",3,"ngClass"],["class","text-danger",4,"ngIf"],[1,"my-2"],["name","password","type","password","placeholder","Password","required","","formControlName","password",3,"ngClass"],[1,"my-1"],["type","button",3,"disabled","click"],[1,"foot-txt"],[1,"bold"],[1,"text-danger"],[1,"d-block","small","text-danger","error",2,"height","2.15rem"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"img",1),e.TgZ(2,"p",2),e._uU(3,"Sign in"),e.qZA(),e._UZ(4,"div",3),e._UZ(5,"input",4),e.YNc(6,O,3,0,"div",5),e._UZ(7,"div",6),e._UZ(8,"input",7),e.YNc(9,P,3,0,"div",5),e._UZ(10,"div",8),e.TgZ(11,"button",9),e.NdJ("click",function(){return n.signin()}),e._uU(12,"Sign In"),e.qZA(),e.TgZ(13,"p",10),e._uU(14,"Forgot your password?"),e.qZA(),e.TgZ(15,"p",10),e._uU(16,"Not a memeber? "),e.TgZ(17,"span",11),e._uU(18,"Sign up now"),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("formGroup",n.loginForm),e.xp6(5),e.Q6J("ngClass",null!=n.usernamef&&n.usernamef.touched&&null!=n.usernamef&&n.usernamef.invalid?"border-danger":""),e.xp6(1),e.Q6J("ngIf",(null==n.usernamef?null:n.usernamef.touched)&&(null==n.usernamef?null:n.usernamef.invalid)),e.xp6(2),e.Q6J("ngClass",null!=n.passwordf&&n.passwordf.touched&&null!=n.passwordf&&n.passwordf.invalid?"border-danger":""),e.xp6(1),e.Q6J("ngIf",(null==n.passwordf?null:n.passwordf.touched)&&(null==n.passwordf?null:n.passwordf.invalid)),e.xp6(2),e.ekj("disabled",!n.loginForm.valid),e.Q6J("disabled",!n.loginForm.valid))},directives:[r.JL,r.sg,r.Fj,r.JJ,r.u,u.mk,u.O5,r.Q7],styles:['@import"https://fonts.googleapis.com/css?family=Work+Sans: 400,500,600";[_nghost-%COMP%]{display:grid;place-items:center;height:100vh}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{align-items:center;display:flex;height:100vh;justify-content:center;margin:auto}body[_ngcontent-%COMP%]{background:#f3f4f4;font-family:"Work Sans",sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.box[_ngcontent-%COMP%]{background:#fff;border-radius:1.5rem;box-shadow:0 0 40px #6e59c266;display:flex;flex-direction:column;height:31.25rem;position:absolute;width:18.75rem}.logo[_ngcontent-%COMP%], .signin[_ngcontent-%COMP%], input[_ngcontent-%COMP%], button[_ngcontent-%COMP%], .foot-txt[_ngcontent-%COMP%], .signin-row[_ngcontent-%COMP%]{margin:0 auto;position:relative}.logo[_ngcontent-%COMP%]{height:4.125rem;margin-top:1.875rem;width:4.125rem}p[_ngcontent-%COMP%]{color:#444}.signin[_ngcontent-%COMP%]{font:600 1.8rem "Work Sans",sans-serif;padding:.17em}.signin-row[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin:.625rem auto .3rem;padding:.625rem;width:11rem}.signin-row[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{color:#444;font-size:2rem;transition:all .15s ease-out;-webkit-transition:all .15s ease-out}.signin-text[_ngcontent-%COMP%]{color:#9da3a5;font:500 .85rem "Work Sans",sans-serif;margin:0;padding-top:.625rem;text-align:center}i[_ngcontent-%COMP%]:hover{cursor:pointer}.ic1[_ngcontent-%COMP%]:hover{color:#1da1f2}.ic2[_ngcontent-%COMP%]:hover{color:#3b5998}.ic3[_ngcontent-%COMP%]:hover{color:#4285f4}input[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;background:none;border:0;border-bottom:2px solid #9da3a5;font:500 .9rem "Work Sans",sans-serif,sans-serif;height:2.15em;margin-top:.7em;transition:all .15s ease-out;-webkit-transition:all .15s ease-out;width:80%}.error[_ngcontent-%COMP%]{margin-left:2rem}.disabled[_ngcontent-%COMP%]{opacity:.4}input[_ngcontent-%COMP%]:focus{border-bottom:2px solid #6e59c2;outline:none}[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#9da3a5}[_ngcontent-%COMP%]::-moz-placeholder{color:#9da3a5}[_ngcontent-%COMP%]:-ms-input-placeholder{color:#9da3a5}[_ngcontent-%COMP%]:-moz-placeholder{color:#9da3a5}button[_ngcontent-%COMP%]{background:var(--bs-gradient-violet);border:0;border-radius:1.4em;color:#fff;font:1.1rem "Work Sans",sans-serif;margin:1.7em auto .6em;outline:none;padding:.6em;transition:all .15s ease-out;-webkit-transition:all .15s ease-out;width:80%}button[_ngcontent-%COMP%]:focus{outline:none}.foot-txt[_ngcontent-%COMP%]{color:#9da3a5;font:500 .85rem "Work Sans",sans-serif;padding:.3em}.foot-txt[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}.bold[_ngcontent-%COMP%]{font-weight:600}']}),o})()},{path:"register",component:(()=>{class o{constructor(t,n,s,g,l){this.fb=t,this.api=n,this.router=s,this.notifier=g,this.destroy$=l,this.regForm=this.fb.group({username:["",[r.kI.required]],email:["",[r.kI.required,r.kI.email]],password:["",[r.kI.required]],confirm_password:["",[r.kI.required]],roles:["",[r.kI.required]]},{validator:Z("password","confirm_password")})}get usernamef(){return this.regForm.get("username")}get emailf(){return this.regForm.get("email")}get confirm_passwordf(){return this.regForm.get("confirm_password")}get rolesf(){return this.regForm.get("roles")}get passwordf(){return this.regForm.get("password")}routeToLogin(){this.router.navigateByUrl("auth/login")}ngOnInit(){}register(){if(this.regForm.valid){let{username:t,email:n,password:s,roles:g}=this.regForm.value;g=[g],this.api.register({username:t,email:n,password:s,roles:g}).pipe((0,p.R)(this.destroy$)).subscribe(l=>{(null==l?void 0:l.message)&&(null==l?void 0:l.message.toLowercase().includes("user was registered successfully"))&&(this.notifier.successNotification(`${l.message}, please login once again`),this.routeToLogin())})}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(r.qu),e.Y36(v),e.Y36(d.F0),e.Y36(C),e.Y36(m.$))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-register"]],features:[e._Bn([m.$])],decls:37,vars:12,consts:[[1,"box",3,"formGroup"],["alt","logo","src","assets/images/reg.svg",1,"logo"],[1,"signin"],[1,"my-3"],["name","username","type","text","placeholder","Username","formControlName","username",3,"ngClass"],["class","text-danger",4,"ngIf"],[1,"my-2"],["name","email","type","text","placeholder","Email","formControlName","email",3,"ngClass"],["name","password","type","password","placeholder","Password","required","","formControlName","password",3,"ngClass"],["name","password","type","text","placeholder","Retype Password","required","","formControlName","confirm_password",3,"ngClass"],["formControlName","roles",1,"mx-auto"],["value",""],["value","admin"],["value","user"],["value","accountant"],["value","Teacher"],[1,"my-1"],["type","button",3,"disabled","click"],[1,"foot-txt"],[1,"foot-txt",3,"click"],[1,"bold"],[1,"text-danger"],[1,"d-block","small","text-danger","error",2,"height","2.15rem"],["class","d-block small text-danger error","style","height: 2.15rem;",4,"ngIf"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"img",1),e.TgZ(2,"p",2),e._uU(3,"Register"),e.qZA(),e._UZ(4,"div",3),e._UZ(5,"input",4),e.YNc(6,y,3,0,"div",5),e._UZ(7,"div",6),e._UZ(8,"input",7),e.YNc(9,U,3,2,"div",5),e._UZ(10,"div",6),e._UZ(11,"input",8),e.YNc(12,A,3,0,"div",5),e._UZ(13,"div",6),e._UZ(14,"input",9),e.YNc(15,S,3,2,"div",5),e._UZ(16,"div",6),e.TgZ(17,"select",10),e.TgZ(18,"option",11),e._uU(19,"Select Roles"),e.qZA(),e.TgZ(20,"option",12),e._uU(21,"Admin"),e.qZA(),e.TgZ(22,"option",13),e._uU(23,"User"),e.qZA(),e.TgZ(24,"option",14),e._uU(25,"Accountant"),e.qZA(),e.TgZ(26,"option",15),e._uU(27,"Teacher"),e.qZA(),e.qZA(),e._UZ(28,"div",16),e.TgZ(29,"button",17),e.NdJ("click",function(){return n.register()}),e._uU(30," Register "),e.qZA(),e.TgZ(31,"p",18),e._uU(32,"Forgot your password?"),e.qZA(),e.TgZ(33,"p",19),e.NdJ("click",function(){return n.routeToLogin()}),e._uU(34,"Already a memeber? "),e.TgZ(35,"span",20),e._uU(36,"Sign In now"),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("formGroup",n.regForm),e.xp6(5),e.Q6J("ngClass",null!=n.usernamef&&n.usernamef.touched&&null!=n.usernamef&&n.usernamef.invalid?"border-danger":""),e.xp6(1),e.Q6J("ngIf",(null==n.usernamef?null:n.usernamef.touched)&&(null==n.usernamef?null:n.usernamef.invalid)),e.xp6(2),e.Q6J("ngClass",null!=n.emailf&&n.emailf.touched&&null!=n.emailf&&n.emailf.invalid?"border-danger":""),e.xp6(1),e.Q6J("ngIf",(null==n.emailf?null:n.emailf.touched)&&(null==n.emailf?null:n.emailf.invalid)),e.xp6(2),e.Q6J("ngClass",null!=n.passwordf&&n.passwordf.touched&&null!=n.passwordf&&n.passwordf.invalid?"border-danger":""),e.xp6(1),e.Q6J("ngIf",(null==n.passwordf?null:n.passwordf.touched)&&(null==n.passwordf?null:n.passwordf.invalid)),e.xp6(2),e.Q6J("ngClass",null!=n.confirm_passwordf&&n.confirm_passwordf.touched&&null!=n.confirm_passwordf&&n.confirm_passwordf.invalid&&null!=n.regForm&&null!=n.regForm.errors&&n.regForm.errors.confirmedValidator?"border-danger":""),e.xp6(1),e.Q6J("ngIf",(null==n.confirm_passwordf?null:n.confirm_passwordf.touched)&&(null==n.confirm_passwordf?null:n.confirm_passwordf.invalid)),e.xp6(14),e.ekj("disabled",!n.regForm.valid),e.Q6J("disabled",!n.regForm.valid))},directives:[r.JL,r.sg,r.Fj,r.JJ,r.u,u.mk,u.O5,r.Q7,r.EJ,r.YN,r.Kr],styles:['@import"https://fonts.googleapis.com/css?family=Work+Sans: 400,500,600";[_nghost-%COMP%]{display:grid;place-items:center;height:100vh}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{align-items:center;display:flex;height:100vh;justify-content:center;margin:auto}body[_ngcontent-%COMP%]{background:#f3f4f4;font-family:"Work Sans",sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.box[_ngcontent-%COMP%]{background:#fff;border-radius:1.5rem;box-shadow:0 0 40px #6e59c266;display:flex;flex-direction:column;height:31.25rem;position:absolute;width:18.75rem}.logo[_ngcontent-%COMP%], .signin[_ngcontent-%COMP%], input[_ngcontent-%COMP%], button[_ngcontent-%COMP%], .foot-txt[_ngcontent-%COMP%], .signin-row[_ngcontent-%COMP%]{margin:0 auto;position:relative}.logo[_ngcontent-%COMP%]{height:4.125rem;margin-top:1.875rem;width:4.125rem}p[_ngcontent-%COMP%]{color:#444}.signin[_ngcontent-%COMP%]{font:600 1.8rem "Work Sans",sans-serif;padding:.17em}.signin-row[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin:.625rem auto .3rem;padding:.625rem;width:11rem}.signin-row[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{color:#444;font-size:2rem;transition:all .15s ease-out;-webkit-transition:all .15s ease-out}.signin-text[_ngcontent-%COMP%]{color:#9da3a5;font:500 .85rem "Work Sans",sans-serif;margin:0;padding-top:.625rem;text-align:center}i[_ngcontent-%COMP%]:hover{cursor:pointer}.ic1[_ngcontent-%COMP%]:hover{color:#1da1f2}.ic2[_ngcontent-%COMP%]:hover{color:#3b5998}.ic3[_ngcontent-%COMP%]:hover{color:#4285f4}input[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;background:none;border:0;border-bottom:2px solid #9da3a5;font:500 .9rem "Work Sans",sans-serif,sans-serif;height:2.15em;margin-top:.7em;transition:all .15s ease-out;-webkit-transition:all .15s ease-out;width:80%}.error[_ngcontent-%COMP%]{margin-left:2rem}.disabled[_ngcontent-%COMP%]{opacity:.4}input[_ngcontent-%COMP%]:focus{border-bottom:2px solid #6e59c2;outline:none}[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#9da3a5}[_ngcontent-%COMP%]::-moz-placeholder{color:#9da3a5}[_ngcontent-%COMP%]:-ms-input-placeholder{color:#9da3a5}[_ngcontent-%COMP%]:-moz-placeholder{color:#9da3a5}button[_ngcontent-%COMP%]{background:var(--bs-gradient-violet);border:0;border-radius:1.4em;color:#fff;font:1.1rem "Work Sans",sans-serif;margin:1.7em auto .6em;outline:none;padding:.6em;transition:all .15s ease-out;-webkit-transition:all .15s ease-out;width:80%}button[_ngcontent-%COMP%]:focus{outline:none}.foot-txt[_ngcontent-%COMP%]{color:#9da3a5;font:500 .85rem "Work Sans",sans-serif;padding:.3em}.foot-txt[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline}.bold[_ngcontent-%COMP%]{font-weight:600}.box[_ngcontent-%COMP%]{height:41.25rem;width:25.75rem}.error[_ngcontent-%COMP%]{margin-left:2.5rem}select[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;background:none;border:0;border-bottom:2px solid #9da3a5;font:500 .9rem "Work Sans",sans-serif,sans-serif;height:2.15em;margin-top:.7em;transition:all .15s ease-out;-webkit-transition:all .15s ease-out;width:80%}select[_ngcontent-%COMP%]:focus{border-bottom:2px solid #6e59c2;outline:none}']}),o})()},{path:"",redirectTo:"login",pathMatch:"full"}];let J=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[d.Bz.forChild(x)],d.Bz]}),o})(),N=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[u.ez,r.UX,h.JF,J]]}),o})()}}]);